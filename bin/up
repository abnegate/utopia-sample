#!/usr/bin/env bash

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" &>/dev/null && pwd)"

function docker_up() {
  pushd "${DIR}/../" &>/dev/null || exit
  docker compose up --build --detach
  popd &>/dev/null || exit
}

function local_up() {
  pushd "${DIR}/../" &>/dev/null || exit
  php app/api.php
  popd &>/dev/null || exit
}

while [[ $# -gt 0 ]]; do
  key="$1"

  case $key in
  -d | --docker)
    docker_up
    break
    ;;
  -l | --local)
    local_up
    break
    ;;
  *)
    shift
    ;;
  esac
done
